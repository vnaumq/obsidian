Чтобы снизить нагрузку от большого количества частых запросов, Телеграм-сервера могут работать в режиме лонг поллинга. **Long polling** - это [[Polling]] "с ожиданием апдейтов", то есть происходит соединение с сервером на определенное время (timeout). Если апдейты есть - сервер их отправляет и закрывает соединение, а если нет - то соединение остается открытым в течение этого времени. Если апдейты за это время появляются - сервер их отправляет и сразу закрывает соединение, а если не появляются, то соединение закрывается по истечении времени таймаута. Затем процесс обращения к серверу повторяется.

Нас интересует параметр `timeout`. Если мы передадим его в запросе к серверу отличным от нуля положительным целым числом, то будет работать схема лонг поллинга, описанная выше. Нецелое число тоже можно передать, но дробная часть будет проигнорирована.

Вот так может выглядеть long polling со стороны клиента (**не забудьте вместо токена моего бота вставить токен вашего бота**):

```python
import requests
import time


API_URL = 'https://api.telegram.org/bot'
BOT_TOKEN = '5424991242:AAGwomxQz1p46bRi_2m3V7kvJlt5RjK9xr0'
offset = -2
timeout = 60
updates: dict


def do_something() -> None:
    print('Был апдейт')


while True: 
    start_time = time.time()
    updates = requests.get(f'{API_URL}{BOT_TOKEN}/getUpdates?offset={offset + 1}&timeout={timeout}').json()

    if updates['result']:
        for result in updates['result']:
            offset = result['update_id']
            do_something()

    end_time = time.time()
    print(f'Время между запросами к Telegram Bot API: {end_time - start_time}')
```

Вот так выглядит работа программы в терминале:

```no-highlight
Время между запросами к Telegram Bot API: 50.2665069103241
Время между запросами к Telegram Bot API: 50.381837129592896
Время между запросами к Telegram Bot API: 50.16954493522644
Был апдейт
Время между запросами к Telegram Bot API: 5.294909954071045
Был апдейт
Время между запросами к Telegram Bot API: 6.167690992355347
Был апдейт
Время между запросами к Telegram Bot API: 1.1628220081329346
Был апдейт
Время между запросами к Telegram Bot API: 0.9956657886505127
Был апдейт
Время между запросами к Telegram Bot API: 0.6711990833282471
Был апдейт
Время между запросами к Telegram Bot API: 18.969956874847412
Был апдейт
Время между запросами к Telegram Bot API: 6.413688898086548
Время между запросами к Telegram Bot API: 50.14260005950928
Время между запросами к Telegram Bot API: 50.16338610649109
Время между запросами к Telegram Bot API: 50.378483057022095
```

Причем, в промежутках между запросами, когда апдейтов нет и истекает время `timeout`, сервер присылает уже известный нам пустой ответ:

```json
{"ok":true,"result":[]}
```

Обратите внимание, что, не смотря на то, что мы для параметра `timeout` указали значение 60 - соединение закрывается где-то за 50 секунд. Видимо, это максимально возможное значение параметра `timeout`, прописанное в настройках серверов Telegram. Соответственно, больше этого значения делать `timeout` смысла не имеет, хотя и работать все равно все будет корректно. 

В продакшне, если вы используете polling, а не webhook - обязательно нужно использовать long polling, то есть передавать запрос на апдейты с параметром `timeout` отличным от нуля положительным целым числом. Polling, или в терминологии Telegram Bot API - short polling - когда `timeout` равен нулю, рекомендуется использовать только в тестовых целях.